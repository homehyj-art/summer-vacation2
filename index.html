<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ì—¬ë¦„ ë°©í•™ ë‚˜ì˜ ì¶”ì–µ</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');
    body { font-family: 'Jua', sans-serif; background-color: #f0f9ff; margin: 20px; }
    h1 { text-align: center; margin-bottom: 30px; }
    .lyrics-container { display: flex; gap: 20px; justify-content: space-around; flex-wrap: wrap; }
    .lyrics { background: #fff; padding: 15px; border-radius: 12px; width: 45%; min-width: 300px; white-space: pre-line; box-shadow: 0 4px 8px rgba(0,0,0,0.1); overflow-y: auto; max-height: 400px; }
    .lyrics h2 { text-align: center; margin-bottom: 15px; }
    .comment-section { margin-top: 30px; background: #fff; padding: 15px; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    textarea, input { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 6px; font-family: 'Jua', sans-serif; }
    button { padding: 8px 16px; background-color: #2196f3; color: white; border: none; cursor: pointer; border-radius: 6px; font-size: 14px; }
    button:hover { background-color: #1976d2; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; vertical-align: middle; }
    th { background-color: #f2f2f2; }
    .like-button {
        background: #ffca28;
        border: none;
        color: #444;
        font-weight: bold;
        cursor: pointer;
        border-radius: 6px;
        padding: 4px 8px;
        margin-left: 10px;
        user-select: none;
    }
    .like-button:hover {
        background: #ffb300;
        color: white;
    }
    .likes-count {
        margin-left: 6px;
        font-weight: bold;
        vertical-align: middle;
    }
    @media (max-width: 768px) {
        .lyrics { width: 100%; }
    }
</style>
</head>
<body>
<h1>ì—¬ë¦„ ë°©í•™ ë‚˜ì˜ ì¶”ì–µ</h1>
<div class="lyrics-container">
    <div class="lyrics">
        <h2>ì—¬í–‰ì„ ë– ë‚˜ìš”</h2>
í‘¸ë¥¸ ì–¸ë•ì— ë°°ë‚­ì„ ë©”ê³ 
í™©ê¸ˆë¹› íƒœì–‘ ì¶•ì œë¥¼ ì—¬ëŠ”
ê´‘ì•¼ë¥¼ í–¥í•´ì„œ ê³„ê³¡ì„ í–¥í•´ì„œ
ë¨¼ ë™ì´ íŠ¸ëŠ” ì´ë¥¸ ì•„ì¹¨ì—
ë„ì‹œì˜ ì†ŒìŒ ìˆ˜ ë§ì€ ì‚¬ëŒ
ë¹Œë”© ìˆ²ì†ì„ ë²—ì–´ë‚˜ë´ìš”
ë©”ì•„ë¦¬ ì†Œë¦¬ê°€ ë“¤ë ¤ì˜¤ëŠ”
ê³„ê³¡ì†ì˜ íë¥´ëŠ” ë¬¼ì°¾ì•„
ê·¸ê³³ìœ¼ë¡œ ì—¬í–‰ì„ ë– ë‚˜ìš”
êµ½ì´ ë˜ êµ½ì´ ê¹Šì€ ì‚°ì¤‘ì—
ì‹œì›í•œ ë°”ëŒ ë‚˜ë¥¼ ë°˜ê¸°ë„¤
í•˜ëŠ˜ì„ ë³´ë©° ë…¸ë˜ ë¶€ë¥´ì„¸
ë©”ì•„ë¦¬ ì†Œë¦¬ê°€ ë“¤ë ¤ì˜¤ëŠ”
ê³„ê³¡ì†ì˜ íë¥´ëŠ” ë¬¼ì°¾ì•„
ê·¸ê³³ìœ¼ë¡œ ì—¬í–‰ì„ ë– ë‚˜ìš”
ì—¬í–‰ì„ ë– ë‚˜ìš”
ì¦ê±°ìš´ ë§ˆìŒìœ¼ë¡œ
ëª¨ë‘ í•¨ê»˜ ë– ë‚˜ìš”
    </div>

    <div class="lyrics">
        <h2>ë‹¤ì‹œ ì—¬ê¸° ë°”ë‹·ê°€</h2>
ë‚˜ ë‹¤ì‹œ ë˜ ì„¤ë ˆì–´
ì´ë ‡ê²Œ ë„ˆë¥¼ ë§Œë‚˜ì„œ
í•¨ê»˜ í•˜ê³  ìˆëŠ” ì§€ê¸ˆ ì´ ê³µê¸°ê°€
ë‹¤ì‹œëŠ” ë„ ë³¼ ìˆ˜ ì—†ì„ ê±°ë¼ê³ 
ì¶”ì–µì¼ ë¿ì´ë¼ ì‚¬ëŒ ì†ì— ê¼­ ë„£ì–´ë’€ëŠ”ë°
íë¥´ëŠ” ì‹œê°„ ì†ì—ì„œ ë„ˆì™€ ë‚´ ê¸°ì–µì€
ì ì  í¬ë¯¸í•´ì ¸ë§Œ ê°€
ëë‚œ ì¤„ ì•Œì•˜ì–´ ì§€ë‚˜ì—¬ë¦„ ë°”ë‹·ê°€
ë„ˆì™€ ë‚˜ ë‹¤íˆ¼ì´ íŒŒë„ì— ì·¨í•´ì„œ ë…¸ë˜í•˜ë©°
ê°™ì€ ê¿ˆì„ ê¾¸ì—ˆì§€ ë‹¤ì‹œ ì—¬ê¸° ë°”ë‹·ê°€
ì´ì œëŠ” ë§í•˜ê³  ì‹¶ì–´
ë„¤ê°€ ìˆì—ˆê¸°ì— ë‚´ê°€ ë”ìš± ë¹›ë‚˜
ë³„ì´ ë˜ì—ˆë‹¤ê³ 
ë‹¤ë“¤ ë¥ë‹¤ê³  ë§‰ ì§œì¦ë‚˜
ê´œì°®ì•„ ìš°ë¦¬ ë‘˜ì€ ë”°ëœ»í•´
ë°”ë¹„ í’ë‹¹ ë¹ ì ¸ë²„ë¦° ë„
ì´ì   êµ¬í•˜ëŸ¬ ê°€ì§€ ì•Šì„ ê±°ì•¼
ëª¨ë˜ ìœ„ í¼í”¼í¼í”¼í¼í”¼ë¥¼ ì¨
ë°€ë¬¼ì´ ë°€ë ¤ì™€ë„ ëª» ì§€ì›Œ
ì¶”ì–µì´ ë¼ ë³€í•œ ê²ƒ ëŠë‚€
ë„ˆë‘ ë‹¤ì‹œ í•œë²ˆ ë°”ë‹¤ ë³´ê³  ì‹¶ì–´
íë¥´ëŠ” ì‹œê°„ ì†ì—ì„œ ë„ˆì™€ ë‚´ ê¸°ì–µì€
ì ì  í¬ë¯¸í•´ì ¸ë§Œ ê°€ ëë‚œ ì¤„ ì•Œì•˜ì–´
ì§€ë‚˜ì—¬ë¦„ ë°”ë‹·ê°€ ë„ˆì™€ ë‚˜ ë‹¤íˆ¼ì´
íŒŒë„ì— ì·¨í•´ì„œ ë…¸ë˜í•˜ë©°
ê°™ì€ ê¿ˆì„ ê¾¸ì—ˆì§€ ë‹¤ì‹œ ì—¬ê¸° ë°”ë‹·ê°€
ì´ì œëŠ” ë§í•˜ê³  ì‹¶ì–´
ë„¤ê°€ ìˆì—ˆê¸°ì— ë‚´ê°€ ë”ìš± ë¹›ë‚˜
ë³„ì´ ë˜ì—ˆë‹¤ê³ 
ì‹œê°„ì´ ê°ˆìˆ˜ë¡ ë˜ ë§ë¬¼ë¦° ë„ˆì™€ ë‚˜
ì†Œì¤‘í•œ ì‚¬ë‘ì„ ì˜ì›íˆ ê°„ì§í•´ì¤˜
ì§€ë‚œ ì—¬ë¦„ ë°”ë‹·ê°€ ë„ˆì™€ ë‚˜ ë‹¤íˆ¼ì´
íŒŒë„ì— ì·¨í•´ì„œ ë…¸ë˜í•˜ë©°
ê°™ì€ ê¿ˆì„ ê¾¸ì—ˆì§€ ë‹¤ì‹œ ì—¬ê¸° ë°”ë‹·ê°€
ì´ì œëŠ” ë§í•˜ê³  ì‹¶ì–´
ë„¤ê°€ ìˆì—ˆê¸°ì— ë‚´ê°€ ë”ìš± ë¹›ë‚˜
ë³„ì´ ë˜ì—ˆë‹¤ê³ 
    </div>
</div>

<div class="comment-section">
    <h2>ì¶”ì–µ ê³µìœ  ê²Œì‹œíŒ</h2>
    <input type="text" id="nameInput" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" />
    <textarea id="commentInput" placeholder="ì—¬ë¦„ ë°©í•™ì— ê²ªì€ ê²½í—˜ì„ ì‘ì„±í•˜ì„¸ìš”..."></textarea>
    <button onclick="addComment()">ëŒ“ê¸€ ë‹¬ê¸°</button>

    <table id="commentsTable">
        <thead>
            <tr><th>ì´ë¦„</th><th>ëŒ“ê¸€</th><th>ì¢‹ì•„ìš”</th></tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js"></script>

<!-- Firebase v10+ ëª¨ë“ˆ CDN -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
  import { getDatabase, ref, push, set, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCtBTzq6aIgRzWDB2gfG2LBK19Y4TYCj4w",
    authDomain: "summer-memory-bc163.firebaseapp.com",
    databaseURL: "https://summer-memory-bc163-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "summer-memory-bc163",
    storageBucket: "summer-memory-bc163.firebasestorage.app",
    messagingSenderId: "1014179818008",
    appId: "1:1014179818008:web:4570325a33a90582d2b16d"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  function addComment() {
    const name = document.getElementById('nameInput').value.trim();
    const comment = document.getElementById('commentInput').value.trim();

    if (!name || !comment) {
      alert('ì´ë¦„ê³¼ ëŒ“ê¸€ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
      return;
    }

    const newCommentRef = push(ref(db, 'comments'));
    set(newCommentRef, {
      name: name,
      comment: comment,
      likes: 0,
      timestamp: Date.now()
    });

    document.getElementById('nameInput').value = '';
    document.getElementById('commentInput').value = '';
  }

  function likeComment(commentKey) {
    const likeRef = ref(db, 'comments/' + commentKey + '/likes');
    runTransaction(likeRef, currentLikes => (currentLikes || 0) + 1);
  }

  onValue(ref(db, 'comments'), snapshot => {
    const tbody = document.querySelector('#commentsTable tbody');
    tbody.innerHTML = '';

    snapshot.forEach(childSnap => {
      const key = childSnap.key;
      const data = childSnap.val();

      const tr = document.createElement('tr');

      const tdName = document.createElement('td');
      tdName.textContent = data.name;

      const tdComment = document.createElement('td');
      tdComment.textContent = data.comment;

      const tdLike = document.createElement('td');
      const likeBtn = document.createElement('button');
      likeBtn.textContent = 'ğŸ‘';
      likeBtn.className = 'like-button';
      likeBtn.title = 'ì¢‹ì•„ìš”';
      likeBtn.onclick = () => likeComment(key);

      const likeCount = document.createElement('span');
      likeCount.className = 'likes-count';
      likeCount.textContent = data.likes || 0;

      tdLike.appendChild(likeBtn);
      tdLike.appendChild(likeCount);

      tr.appendChild(tdName);
      tr.appendChild(tdComment);
      tr.appendChild(tdLike);

      tbody.appendChild(tr);
    });
  });

  window.addComment = addComment;  // ê¸€ë¡œë²Œ í•¨ìˆ˜ë¡œ ë“±ë¡ (ë²„íŠ¼ì—ì„œ í˜¸ì¶œ ê°€ëŠ¥)
</script>
